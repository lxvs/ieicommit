#!/bin/bash

OPTIND=1
remote="origin"

while getopts "h?r:" opt; do
    case "$opt" in
        h|\?)
            echo -e "\nPush"
            echo -e "Usage:"
            echo -e "jgpush [-r <remote>] [<branch>]\n"
            echo -e "Push local commits to Gerrit for review, equivalent to"
            echo -e "git push <remote> HEAD:refs/for/<branch>"
            echo -e "\nBy default,"
            echo -e "<remote> = origin"
            echo -e "<branch> = master"
            exit 0
            ;;
        r)  remote=$OPTARG
            ;;
    esac
done

shift $((OPTIND-1))

[[ "${1:-}" = "--" ]] && shift

git push $remote HEAD:refs/for/${1:-master}
